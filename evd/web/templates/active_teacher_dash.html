{% extends "base.html" %}
{% load tags %}

{% block head_title %}eVidyaloka - Teacher dashboard{% endblock %}

{% block head_styles %}
    {{ block.super }}
    <link rel='stylesheet' type='text/css' href='/static/css/calendar/fullcalendar.1.5.3.min.css'/>
    <link rel="stylesheet" type="text/css" href="/static/css/calendar/theme.css" />
    <link rel="stylesheet" type="text/css" href="/static/css/teacherdash.css" />
    <link rel="stylesheet" href="/static/css/colorbox.css"/>
    
    <style>
    	#cboxLoadedContent{
			height: 700px !important;
		}
    	.admin_container{
    		width : 136%;
    		margin-top : 60px;
    		margin-left : -130px !important;
    	}
    	.left_container_box{
    		 width : 60%; 
    		 height : auto;
/*     		 background-color:red; */
    	}
    	.right_container_box{
    		top : 60px;
    		width : 43%; 
    		height : auto;
    		right : -92px;
    		position : absolute;
    		padding-left : 15px;
/*     		border-left : 1px solid blue; */
/*     		background-color:yellow; */
    	}

    	td.table_styling {
	font-size: 12px;
	background-color: white;
	color: #0698a5;
	font-weight: bold;
	border-collapse:separate;
}

th.table_styling {
	font-size: 12px;
	color: #075f2e;
	background-color: rgb(169, 206, 146);
	border-top: 0px;
	border-collapse:separate;
}

.table>tbody>tr>th {
	padding: 8px;
	line-height: 1.42857143;
	vertical-align: top;
	width: 15%;
	border-top: 1px solid black;
	border-collapse:separate;
}

th.default_time_table {
	font-weight: bold;
	font-size: 12px;
	color: black;
	background-color: rgb(213, 239, 196);
	border-collapse:separate;
}

td.default_time_table {
	font-size: 12px;
	color: black;
	background-color: rgb(213, 239, 196);
	border-top: 0px solid #ddd;
	border-collapse:separate;
}

tr.heading_time_table, tr>th.heading_time_table,div.heading_time_table {
	background-color: rgb(142, 188, 50);
	color: white;
	border-collapse:separate;
}
div.heading_time_table {
margin-right: 0px;
    margin-left: 0px;
}
th.heading_time_table {
	font-weight: bold;
	text-align: center; background-color : rgb( 142, 188, 50);
	color: white;
	background-color: rgb(142, 188, 50); color : white;
	border: 1px rgb(142, 188, 50);
	border-collapse:separate;
}

th.center_info {
	background-color: rgb(142, 188, 50);
	color: white;
	width: 100%;
	text-align: center;
	font-size: 14px;
	font-weight: bold;
	border: 1px rgb(142, 188, 50);
	border-collapse:separate;
}



.list_style ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.list_style li::before {
  content: "â€¢ ";
  color: green; /* or whatever color you prefer */
  font-size : 30px;
}
#cboxClose {

loat: left !important;
    display: none !important;

}
.plan_topic,.plan_topic:HOVER{
background-color: #b3781a;


}

</style>
{% endblock %}

{% block doc_ready %}
    {{ block.super }}
    window.evd.pre_submission = function(){
        var q = "";
        var $att_form = $($(this).attr("href"));
        var stu_len = $att_form.find("input.student").length;
        $att_form.find("input.student").each(function(index, val){
            stu_name = $(this).attr("value");
            q += stu_name + ((index < stu_len-1) ? ";" : "");
        });
        $att_form.find("input[name='student']").val(q);
        q="";
        var attend_len = $att_form.find("input.attend").not(":checked").length;
        $att_form.find("input.attend").not(":checked").each(function(index,val){
            attend = parseInt($(this).val());
            q += attend + (( index < attend_len - 1) ? ";" : "");
        });
        $att_form.find("input[name='attend']").val(q);
    }
     window.evd.closemodal = function() {
        $(this).parents(".modal").modal("hide");
        evd.show_msg("Attendance has been submitted for this session");
    }

    window.evd.pre_feedback = function(){
        var $form = $($(this).attr("href"));
        var len = $form.find("input[type='checkbox'].feedback").filter(":checked").length;
        var $topic_ids = $form.find("input[name='topic_ids']");
        var q = "";
        /*$(this).parent().find("input[type='checkbox'].feedback").filter(":checked").each(function(index,val){
             q += $(this).val() + (index < (len-1) ? ";" : "") ;
        });*/
        q = $(this).parent().find("select.topics").children(":selected").attr("data-topic-id");
        $topic_ids.val(q);
        var comment = $form.find("textarea").val().trim();
        if(comment == ""){
            alert("Feedback cannot be empty");
            return false;
        }
        var stat = $(this).parent().find('#status').val(),
            reasoncode = $(this).parent().find('.reason-code').find("select[name='reason']").val();
        if(stat === 'Cancelled' || stat === 'Rescheduled'){
            if(!reasoncode){
                alert("You should select a Reason code");
                return false;
            }
        }

    }
    window.evd.fd_calback = function(){
        $(this).parent().children("textarea").val("");
        $(".feedback-modal").modal("hide");
        evd.show_msg("Your feedback has been submitted for this session");
         render_event(window.last_clicked_day.attr("data-event-id"), window.dte);
    }

    var accept =  "";
    evd.pre_response = function(){
        accept = $(this).children("span").text();
    }
    evd.response_cb = function(resp){
        if(resp == "success"){
            var notification = $(this).parents("li").attr("data-notification");
            var center = $("li[data-notification='"+ notification +"']").children("p:first").text().split(",")[1].split("-")[0];
            $("li[data-notification='"+ notification +"']").remove();
            $("#my-notifications").children(":first-child").appendTo($("#my-notifications").next("ul"));
            $("#my-notifications").children(":first-child").addClass("active"); 
            if(accept == "accept")
                evd.show_msg("Thankyou for accepting the offer. Our " + center + " centeradmin will contact you soon");    
            else
                evd.show_msg("Thanks for the reply. We will get back to you with future requirements");
        }
    }
    $("ul.custom-select li").toggle(function(){
        $("ul.custom-select > li.focus-f").not($(this)).trigger("click");
        $(this).addClass("focus-f");
    },function(){
        $(this).removeClass("focus-f");
    });
    $("html").click(function(){
        $("ul.custom-select li.focus-f").trigger("click");
    });
    $("ul.custom-select li span.dropdown a").click(function(){
        $(this).parent("span.dropdown").prev().text($(this).text());
    });




{% endblock %}

{% block body_container %}

<div class="container new_dash_container admin_container">
	<div class="row left_container_box">
		<div class="col-md-12">
		<input type="hidden" value="{{center_data}}" id="center_data_id" />
		<input type="hidden"  value="{{offering}}" id="offerings" />
			<div class="note-box" style="" >
				<div class="row">
					<div class="col-md-5" id="first_center_name"><p style="font-size:20px;margin-bottom:2px;padding-left: 5px;" rel="tooltip" 
						data-placement="right" id="center_name_id"></p>
					</div>
					<div class="col-md-7">
						<div class="col-md-7"></div>
						<div class="col-md-5" id="flt" style="display: none;">
							<button class="btn btn-danger enter left" href="#myCarousel1" data-slide="prev"
								style="float: left; font-size: 12px; cursor: pointer; z-index: 1; height: 35px; padding-top: 0px; 
							 	padding-bottom: 0px; padding-right: inherit; padding-left: inherit; box-shadow: 0px 0px 0px #666666;
							 	right: auto;left: 0;position: absolute;">
								<i class="fa fa-chevron-left" style="color: black;"></i>
							</button>
							<button class="btn btn-danger enter right" href="#myCarousel1" data-slide="next"
								style="float: left; font-size: 12px; cursor: pointer; z-index: 1; height: 35px; padding-top: 0px; 
								padding-bottom: 0px; padding-right: inherit; padding-left: inherit; box-shadow: 0px 0px 0px #666666;
								right: 0;left: auto;position: absolute;">
								<i class="fa fa-chevron-right" style="color: black;"></i>
							</button>
						</div>
					</div>
				</div>
				<div class="row heading_time_table" id="theading_timeTable_id" style="display: none;">
					<div class="col-md-4">
						<b><p style="float: right;margin-top: 5px;">TIME TABLE</p></b>
					</div>
				</div>
				<div id="loader_div"></div>
				<div class="dashboard" id="time_table_div" style="height: 250px; padding-left: 200px; z-index: -1; padding-top: 75px;">
					<div class="carousel slide" id="myCarousel1" data-interval="false" data-wrap="false">
						<div class="carousel-inner" id="carousel-inner1"></div>
					</div>
				</div>
			</div>
		</div>
		{% if topic_booked != 0 %}
		<div class="col-md-12">
		
			<div class="note-box" style="height: 375px;"  >
				<table style="position: relative;top: 12px;">
					<td style="position: relative;left: 10px;width: 400px;"><p style="font-weight: bold;">Topic Booked: {{topic_booked}}</p></td>
					{% if submit_video == 1 %}
					<td style="position: relative;left: 156px;"><a href="/v2/video_assignment"><button style="width: 150px;background-color: green;color: #FFFFFF;height: 30px;"> Submit Video Link</button></a></td>
					{% else %}
					<td style="position: relative;left: 156px;"><button style="width: 150px;background-color: #F15A22;color: #FFFFFF;">Pending Approval</button></td>
					{% endif %}
				</table>
				<br>
				<div>
				<p></p>&nbsp;&nbsp;<span style="color:black;"> Total Subtopics: {{ subtopic_count }}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<span style="color: blue;">Submitted: {{ submitted }}</span>
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: green;">Approved: {{ approved }}</span> </p>   
				</div>
							
				<div style="position: relative;left: 36px;top: 31px;">
					<a href="https://www.youtube.com/embed/WPeyFBA-AFY" target="_blank" class="btn btn-secondary btn-lg mystudentcls" style="position: relative;left: 12px;"><b>Why (appeal)</b></a>
					<a target="_blank" href="https://medium.com/@monosnap/windows-how-to-record-videos-b6ded8e63cd1" class="btn btn-secondary btn-lg mystudentcls" style="position: relative;left: 29px;"><b>How (Monosnap guide)</b></a>
					<a href="https://www.youtube.com/embed/_qZHUWveyQI" target="_blank" class="btn btn-secondary btn-lg mystudentcls" style="position: relative;left: 32px"><b>How it looks like</b></a>
					<a href="https://www.youtube.com/embed/DvxjRj-Ukcs" target="_blank" class="btn btn-secondary btn-lg mystudentcls" style="position: relative;left: 52px"><b>References</b></a>
					<br>
					<br>
					<a href="https://www.youtube.com/embed/WPeyFBA-AFY" target="_blank">
						<iframe width="160px" height="120px" src="https://www.youtube.com/embed/WPeyFBA-AFY" style="position: relative;left: -10px;" frameborder="0" allowfullscreen allow="accelerometer; encrypted-media; gyroscope; picture-in-picture ">
						 </iframe>
					  </a>
					  <a target="_blank" href="https://medium.com/@monosnap/windows-how-to-record-videos-b6ded8e63cd1">
						<img src="/static/images/procedure.png" alt="Forest" style="width:150px;    position: relative;top: 1px;">
					  </a>
						<a href="https://www.youtube.com/embed/5sB_hy8b0M4" target="_blank">
						<iframe width="160px" height="120px" src="https://www.youtube.com/embed/5sB_hy8b0M4" style="position: relative;left: 10px;" frameborder="0" allowfullscreen allow="accelerometer; encrypted-media; gyroscope; picture-in-picture">
						 </iframe>
					  </a>
					  <a href="https://www.youtube.com/embed/DvxjRj-Ukcs" target="_blank">
						<iframe width="160px" height="120px" src="https://www.youtube.com/embed/ui7sHfaLc0c" style="position: relative;left: 18px;" allowfullscreen frameborder="0" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture">
						 </iframe>
					  </a>
					  <a href="/static/images/Checklist_for_videomodulecreation.pdf" target="_blank" class="btn btn-success btn-lg mystudentcls" style="position: relative;left: 264px;left: 140px;top: 14px;"><b>Guidelines</b></a>
					  <form method="get" action="/static/images/Template_forVideoCapsule.pptx">
						<button class="btn btn-info btn-lg " style="position: relative;left: 264px;left:267px;top: -26px;" type="submit"><b>Template</b></button>
					 </form><form method="get" action="https://wikividya.evidyaloka.org" target="_blank">
						<button class="btn btn-info btn-lg " style="position: relative;left: 264px;left:383px;top: -66px;" type="submit"><b>Textbook</b></button>
					 </form>
					</div>
        	</div>
		</div>
		{% endif %}
		<div class="col-md-12">
		
			<div class="note-box"  >
		 	{% if my_offering %}
		 	
            	<h3><b >My Classroom</b></h3>
				<div class="clas-img" style=" height:250px; text-align:center;padding-left:200px;z-index:-1;padding-top:75px;" >
                	<p style="color:white;margin-left:-240px; margin-bottom:20px;" > Welcome to Classroom </p>
                	{% for offering in my_offering%}
                	{% if forloop.first %}
                    <div id="enter_class" class=" myclasscls enter" target="_blank" style="z-index:1; margin-left:83px;margin-top:36px;width:40px;height:15px;
                    	cursor:pointer " href="/myclass/?ay_id={{offering.ay_id}}">
                    	<span style='margin-top: -10px;position: absolute;margin-left: -17px;'>Enter</span>
                    </div>
                      {% endif %}
                     {% endfor %}
                </div>
                <a id="comments" href="#Comments-modal" rel="tooltip" data-title="Comments" style="float:right;margin:13px 5px">
	                <img src='/static/images/comments.png'/>
    	        </a>
                <div id='attendence-board' class="select-box select-pin attendence-board" style="margin:10px;font-size:14px;">
	                <select name='my_offerings' style='border-radius: 7px;background: whitesmoke;width:330px!important;' id='my_offerings'>
    	                {% for offering in my_offering%}
            	             <option value={{ offering.id }} data-academicYear ='{{offering.ay_id}}' data-centerId ='{{offering.center_id}}'>
        	    	             {{ offering.grade }} {{ offering.subject }}, {{ offering.center }} - {{ offering.date }} {{ offering.start }}
                    	     </option>
                        {% endfor %}
               		</select>
                    <select name="my_students" style='border-radius: 7px;background: whitesmoke;min-width:175px;max-width:185px !important'>
                    	<option></option>
                        {%for offering in my_offering%}
                        	{% if forloop.counter == 1%}
                            	{% for stu in offering.students%}
                                	<option data-offering-id={{ offering.id }} stu-name="{{ stu.name }}" value={{ stu.id}}>{{ stu.name }}</option>
                                {% endfor %}
                            {% endif %}
                        {% endfor %}
                    </select>
                    <div class="student_options hide">
                    	{%for offering in my_offering%}
                        	<select name="{{ offering.id }}">
                            	<option></option>
                                	{% for stu in offering.students%}
                                    	<option data-offering-id={{ offering.id }} stu-name="{{ stu.name }}" value={{ stu.id}}>{{ stu.name }}</option>
                                    {% endfor %}
                            </select>
                        {% endfor %}
                    </div>
                    <div class="student_info hide" style="margin:5px;margin-top:10px;line-height:1.6em">
                    	<table class="table" style="width: 100%;text-align: left">
                        	<thead>
                            	<tr>
                                	<th><h3>Subject</h3></th>
                                    <th><h3>Present</h3></th>
                                    <th><h3>Absent</h3></th>
                                </tr>
                         	</thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
              {% endif %}
        	</div>
		</div>
		<div class="col-md-12">
			<div class="note-box flex justify-center items-center " style='min-height: 100px !important;'>
				<h3 style="text-align: center; ">Dashboard<div class="pagination text-center" style="margin-top:0px;">
				</div></h3>
				<form method="POST" action="/v2/teacherdash">
					{% csrf_token %}
						<div class="col-md-4 col-sm-4 col-lg-4 col-xs-4" style="float: left;text-align:center ;">
							From &nbsp;<input type="date" style='width: 187px; padding-left:20px;' value ="{{start_date}}" id="from" name='from' required>
					</div>
					<div class="col-md-4 col-sm-4 col-lg-4 col-xs-4" style="float: left;text-align:center;margin-left:-25px;">
							To <input type="date" id="to" style='width: 187px;padding-left:20px;position:relative;left:16px;' value="{{end_date}}" name='to' required>
					</div>
					<div class="col-md-4 col-sm-4 col-lg-4 col-xs-4" style="float: left;text-align:center;margin-left:-25px;">
					
						<input type='submit' value='Submit' class='btn btn-success' style="margin-top: 17px;">
					</div>
				</form>
            </div>

			<table  class="col-md-12 table table-bordered" >
					<thead class="thead-dark" style="background-color: rgb(133, 96, 233); color:white">
						<tr style="font-size: small; font-weight: bolder;">
							<th scope="col">Center</th> 
							<th scope="col">Offering</th>
							<th scope="col">Content Reference</th>
							<th scope="col">Student Doubts</th> 
							<th scope="col">Planned Session</th>
							<th scope="col">Completed Session</th>
							<th scope="col">Cancelled Session</th>
							<th scope="col">Offline Session</th>
							<th scope="col">Scheduled Session</th>
							
						</tr>
					</thead>
					<div style="width:100%;overflow:auto; max-height:100px; text-align: center;">
							<tbody style="width:100%;">
								{% for assigned_offering in assigned_offerg %}
								<tr>
									<td>{{assigned_offering.centerIdVal}}</td>
									<td>{{assigned_offering.assigned_offering_id}}</td>
									{% if assigned_offering.digital_school  != '' %}
										<td><a role="button" class="btn btn-success" href="/v2/offering/topic-details/?center_id={{assigned_offering.centerId}}&offering_id={{ assigned_offering.offeringIdVal }}&ayfy_id={{ assigned_offering.ay_id }}&user_type=teacher" class="tag" target="_blank">view</a></td>
									{% else %}
									<td></td>
									{% endif %}
									<td><a role="button" class="btn btn-success" href="/v2/center/subject/studentdoubts?subjectId={{ assigned_offering.offeringIdVal }}&centerId={{assigned_offering.centerIdVal}}" class="tag" target="_blank">View</a></td>
									<td>{{assigned_offering.planned_session}}</td>
									<td>{{assigned_offering.completed_session}}</td>
									<td>{{assigned_offering.cancelled_session}}</td>
									<td>{{assigned_offering.offline_session}}</td>
									<td>{{assigned_offering.scheduled_session}}</td>
									
								</tr>
								{% endfor %}
						</tbody>
						</div>
			   </table>
		</div>
		<div class="col-md-12">
			<div class="note-box" style="min-height:auto;background-color:transparent; border:none;">
				<div class="row" style="margin-left:0">
					<div class="col-md-6">
						<a href="/my_students/" class="btn btn-secondary btn-lg mystudentcls" style="width:100%;border-radius:0px"><b>My Students</b></a>
					</div>
					<div class="col-md-6">
						<a href="http://evidyaloka.facebook.com" target="_blank" class="btn btn-success btn-lg" style="width:100%;border-radius:0px; background: #9166ca;"><b>Community</b></a>
					</div>
				</div>
				<br>
				<div class="row" style="margin-left:0">
				<div class="col-md-6">
					<a href="http://wikividya.evidyaloka.org" target="_blank" class="btn btn-success btn-lg" style="width:100%;border-radius:0px"><b>My Topics</b></a>
				</div>
				<div class="col-md-6">
					<a href="/aidsntools/" target="_blank"  class="btn btn-info btn-lg" style="width:100%;border-radius:0px;"><b>My Tools</b></a>
				</div>
				</div>
						
						
						
			</div>
		</div>
		
		<div class="col-md-12">
			<div class="pref-courses note-box">
            	<h3>My Courses (Previous) <div class="pagination" style="margin-top:0px"><i rel="#my-courses" data-step="3" class="prev icon"></i><i rel="#my-courses" data-step="3"  class="next icon"></i></div></h3>
                {% if assigned_offerings %}
                	<ul id="my-courses" class="cycle">
                    	{% for offering in assigned_offerings %}
                        	<li {% if forloop.counter < 4 %}class="active"{% endif %}>{{ offering.course_offered }} {{ offering.center }} -<i> {{ offering.start_date }}</i></li>
                        {% endfor %}
                    </ul>
                    <ul>
                    	{% for offering in assigned_offerings %}
                        	{% if forloop.counter < 4 %}
                            	<li>{{ offering.course_offered }} {{ offering.center }} -<i>{{ offering.start_date }} to {{ offering.end_date }}</i></li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                {% else %}
                	<p>No course found!</p>
                {% endif %}
            </div>
		</div>
		
		<div class="col-md-12">
			<div class="note-box">
				<h3>Appreciations Received:&nbsp;({{total_appreciation}})</h3>
				<div class="row">
					{% if get_stickets_for_volunteer %} 
					   {% for sticker in get_stickets_for_volunteer %}
					<div class="col-md-2"
						style="margin-left: 25px; margin-bottom: 5px; margin-top: 10px;">
						<div class="row">
							<div class="col-md-12 text-center" style="width: 100px;">
								<img title='{{sticker.sticker__sticker_name}}'
									class='awesome_sticker'
									src='/{{sticker.sticker__sticker_path}}'
									style="width: 100px; height: 90px; border-radius: 50%;" />
							</div>
							<div class="col-md-12 "
								style="margin-top: 3px; margin-left: 20px;">
								<label> COUNT:&nbsp;&nbsp; </label><label>{{sticker.countofsticker}}</label>
							</div>
						</div>
					</div>
					  {% endfor %} 
					{% else %}
					   <p style="margin-left: 29px;">Wishing to come appreciation from others.</p>
					{% endif %}
				</div>
			</div>
		</div>
		
		<div class="pull-right">
			 <a class="twitter-timeline" href="https://twitter.com/evidyaloka" data-widget-id="506517147732811776" style="font-size:14px;font-family:Open Sans, Helvetica Neue, Helvetica, Arial, sans-serif">
           Tweets by @evidyaloka</a>
		</div>
	</div>
	<div class="row right_container_box">
		<input type="hidden" value="{{teacher_center.state}}" id="center_state" />
		<div class="col-md-12">
			<div class="note-box">
			<table class="table" style="font-size: 12px;width:100%;border-collapse:separate ;">
				<tr>
					<th colspan="3" class="center_info" style="border-top: 1px solid rgb(142, 188, 50);border-left: 1px solid rgb(142, 188, 50)"><b>Center Information</b></th>
				</tr>
				<tr>
					<td width="30%" ><b>Center</b></td>
					<td colspan="2" width="80%" id='infoCenter'>{{teacher_center.name}}</td>
				</tr>
				<tr>
					<td width="20%" ><b>Skype Id</b></td>
 					<td colspan="2"width="80%" id='infoSkypeId'>{{skype_id.name}}</td>
 				</tr>
 				<!-- <tr>
					<td width="20%"><b>TeamViewer Id</b></td>
 					<td colspan="2" width="80%"></td>
 				</tr> -->
 				<tr>
 					<td width="30%" ><b>Class Assistant (POC)</b></td>
 					<td width="40%" id='infoCAName'>{{assistant.name}}</td>
 					<td width="30%" id='infoCAPhone'>{{assistant.phone}}
 				</tr>
 				<tr >
 					<td width="20%"><b>HM</b></td>
 					<td colspan="2" width="80%" id='infoHM'>{{hm.name}}</td>
 				</tr>

                <tr >
 					<td width="30%"><b>Field co-ordinator</b></td>
 					<td colspan="2" width="80%" id='infoFC'> {{fc.name}}   &nbsp; &nbsp;   {{fc.phone}}</td>
 				</tr>

                <tr >
 					<td width="30%"><b>Delivery co-ordinator</b></td>
 					<td colspan="2" width="80%" id='infoDC'> {{dc.name}} &nbsp; &nbsp;   {{dc.phone}}</td>
 				</tr>
 				<tr>
 					<td width="30%"><b>Center Admin</b></td>
 					<td colspan="2" width="80%" id='infoCAD'>{{admin.name}} &nbsp; &nbsp;   {{admin.phone}}</td>
 				</tr>
				<tr>
 					<td width="30%"><b>Donor</b></td>
 					<td colspan="2" width="80%" id='center_donor'>{{donor.name}} &nbsp; &nbsp;   {{donor.phone}}</td>
 				</tr>
				<tr>
 					<td width="30%"><b>Partner</b></td>
 					<td colspan="2" width="80%" id='center_funding_partner'>{{delivery_partner.name}} &nbsp; &nbsp;   {{delivery_partner.phone}}</td>
 				</tr>
			</table>
			</div>
		</div>
		<div class="col-md-12">
				<div class="dashboard-calendar-container" style="width:370px;min-height:500px;float:left; margin-top:10px">
            		<div id="calendar" style="width:360px;border-radius:3px"></div>
            	</div>
            	
            	
		</div>
		{% for offering in my_offering%}
		{% if forloop.first %}
		<div class="col-md-12" style="margin-top:-19px; min-height:35px;margin-bottom: 28px;">
				
				<a href="/v2/plan_topics/{{offering.center_id}}/{{offering.id}}" 
				 class="btn btn-info btn-lg plan_topic modifenroll"  style="width: 100%;  border-radius: 0px;" 
				 target="_blank" ><b>Plan Your Topics</b></a>
		</div>
		{% endif %}
		{% endfor %}
		<div class="col-md-12">
			<div class="note-box" style="margin-top:-19px; min-height:35px">
				<h3>Annual Calendar
					<span class="pull-right">
						<a href="javascript:void(0);" id="annual_calendar_id" style="font-size:20px;font-weight:20px">
							<span id="cheveron_holder"><i class="fa fa-chevron-down" aria-hidden="true"></i></span>
						</a>
					</span>
				</h3>
				<div class="annual_calendar list_style" style="padding:20px;max-height:250px;overflow-y:scroll;display:none">
					<ul id="annual_calendar_ul">
						
					</ul>				
				</div>				
			</div>
		</div>
		
		<div class="col-md-12">
			<div class="note-box" style="margin-top:-1px; min-height:35px">
				<h3>Holidays
					<span class="pull-right">
						<a href="javascript:void(0);" id="holidays_id" style="font-size:20px;font-weight:20px">
							<span id="holidays_cheveron_holder"><i class="fa fa-chevron-down" aria-hidden="true"></i></span>
						</a>
					</span>
				</h3>
				<div class="holidays list_style" style="padding:20px;max-height:250px;overflow-y:scroll;display:none">					
					{% for holidays in holidays_list %}
					{% if forloop.first %}
					<ul style='display:block' class='{{holidays.ay}}'>
						{% if holidays %}
							{% for holiday in holidays.holidays %}
								<li style="font-size:12px; padding:0px;">{{holiday.description}} - {{holiday.day|date}}</li>
							{% endfor %}
						{% else %}
							<li style="font-size:12px; padding:0px;">No holidays found!</li>
						{% endif %}
					</ul>
					{% else %}	
					<ul style='display:none' class='{{holidays.ay}}'>
						{% if holidays %}
							{% for holiday in holidays.holidays %}
								<li style="font-size:12px; padding:0px;">{{holiday.description}} - {{holiday.day|date}}</li>
							{% endfor %}
						{% else %}
							<li style="font-size:12px; padding:0px;">No holidays found!</li>
						{% endif %}
					</ul>
					{% endif %}
					{% endfor %}		
				</div>				
			</div>
		</div>
		
		<div class="col-md-12">
			<div class="note-box" style="margin-top:-1px; min-height:35px">
				<h3>My Tasks
					<span class="pull-right">
						<a href="javascript:void(0);" id="mytask_id" style="font-size:20px;font-weight:20px">
							<span id="mytask_cheveron_holder"><i class="fa fa-chevron-down" aria-hidden="true"></i></span>
						</a>
					</span>
				</h3>
				<div class="mytask list_style" style="padding:20px;max-height:250px;overflow-y:scroll;display:none">
					<ul id="mytask_ul">
						
					</ul>				
				</div>				
			</div>
		</div>
		<div class="col-md-12">
			<div class="note-box" style="margin-top:-1px; min-height:35px">
				<h3>My Messages
					<span class="pull-right">
						<a href="javascript:void(0);" id="messages_cls_id" style="font-size:20px;font-weight:20px">
							<span id="messages_cheveron_holder"><i class="fa fa-chevron-down" aria-hidden="true"></i></span>
						</a>
					</span>
				</h3>
				<div class="messages_cls list_style" style="padding:20px;max-height:250px;overflow-y:scroll;display:none">
					<ul>
						<li style="font-size:12px; padding:0px;">No Message found!</li>
					</ul>				
				</div>				
			</div>
		</div>
	</div>
	<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
</div>
{% endblock %}
{% block bottom_scripts %}
    {{ block.super }}
<script src='/static/js/underscore_1.5.2.min.js' type='text/javascript' ></script>
<script>
    {% include "underscore_temps/teacher_demand.tmpl" with container="#render_demand" only %}
</script>
<script>
 $(document).ready(function(){
 	$(".myclasscls").colorbox({iframe:true, fastIframe:false, width:"1100px", height:"760px", gtransition:"fade", scrolling : false, fixed:false });
    $(".mystudentcls").colorbox({iframe:true, fastIframe:false, width:"1100px", height:"760px", gtransition:"fade", scrolling : false, fixed:false });
    $(".modifenroll").colorbox({iframe:true, fastIframe:false, width:"900px", height:"760px", gtransition:"fade", scrolling   : false });

 });
</script>
<script>
    $(document).ready(function(){
	
        $('#Modal_evd').on('hidden.bs.modal', function (e) {
          // do something...
          $('#Modal_evd .video').attr("src", $("#Modal_evd  .video").attr("src"));
        });
    });
</script>
    <script type="text/javascript" src="/static/js/jquery.colorbox.min.js"></script>
    <script type='text/javascript' src='/static/js/calendar/fullcalendar.js'></script>
    <script type="text/javascript" src="/static/js/calendar/jquery-ui-1.8.17.custom.min.js"></script>
    <script type="text/javascript" src="/static/js/jquery.tmpl.min.js"></script>
    <script type="text/javascript" src="/static/js/teacherdash.js"></script>
    <script type="text/javascript" src="/static/js/annual-calendar.json"></script>
   <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.0/jquery-ui.min.js"></script>
    
    
    
<script>


	$("#annual_calendar_id").on('click', function(){
		if ($("#cheveron_holder").html().toString().indexOf('down')>-1){
			$("#cheveron_holder").empty();
			$("#cheveron_holder").append('<i class="fa fa-chevron-up" aria-hidden="true"></i>');
		}else{
			$("#cheveron_holder").empty();
			$("#cheveron_holder").append('<i class="fa fa-chevron-down" aria-hidden="true"></i>');
		}
		$(".annual_calendar").toggle();
	});
	
	$("#holidays_id").on('click', function(){
		if ($("#holidays_cheveron_holder").html().toString().indexOf('down')>-1){
			$("#holidays_cheveron_holder").empty();
			$("#holidays_cheveron_holder").append('<i class="fa fa-chevron-up" aria-hidden="true"></i>');
		}else{
			$("#holidays_cheveron_holder").empty();
			$("#holidays_cheveron_holder").append('<i class="fa fa-chevron-down" aria-hidden="true"></i>');
		}
		$(".holidays").toggle();
	});
	
	$("#messages_cls_id").on('click', function(){
		if ($("#messages_cheveron_holder").html().toString().indexOf('down')>-1){
			$("#messages_cheveron_holder").empty();
			$("#messages_cheveron_holder").append('<i class="fa fa-chevron-up" aria-hidden="true"></i>');
		}else{
			$("#messages_cheveron_holder").empty();
			$("#messages_cheveron_holder").append('<i class="fa fa-chevron-down" aria-hidden="true"></i>');
		}
		$(".messages_cls").toggle();
	});
	
	$("#mytask_id").on('click', function(){
		if ($("#mytask_cheveron_holder").html().toString().indexOf('down')>-1){
			$("#mytask_cheveron_holder").empty();
			$("#mytask_cheveron_holder").append('<i class="fa fa-chevron-up" aria-hidden="true"></i>');
		}else{
			$("#mytask_cheveron_holder").empty();
			$("#mytask_cheveron_holder").append('<i class="fa fa-chevron-down" aria-hidden="true"></i>');
		}
		$(".mytask").toggle();
	})
	

	$(document).ready(function(){
		$("#annual_calendar_ul").empty();
		generateAnnualCalendar();
		getMyTasks();
		var data = $("#center_data_id").val();
    	if (data != null && data != 'undefined' && data != '' && data!='[]'){
    		loading();
    		data = JSON.parse(data);
    		window.center_id = data[0]['id'];
    	 	$('#center_name_id').text(data[0]['name']);
     		timeTableForWeek(data[0]['id'], data[0]['name'], 'time_table_id1');
     		setTimeout(function() {  multiple_centers_access(data); }, 2000); 
    	}
    	$('#overlay').remove();
    	
        
     });
	
	function generateAnnualCalendar(){
		var jsonArray = JSON.parse(annualCalendarData);
		var flag = false;
		for (i=0; i<jsonArray.length; i++){
			var jsonData = jsonArray[i][$("#center_state").val()];
			if (jsonData != 'undefined' && jsonData!=null && jsonData!=''){
				for (j=0; j<jsonData.length; j++){
					flag = true;
					$("#annual_calendar_ul").append('<li style="font-size:12px; padding:0px;">'+jsonData[j]['event']+',   '+jsonData[j]['date']+'</li>');
				}
			}
		}
		if (!flag){
				$("#annual_calendar_ul").append('<li style="font-size:12px; padding:0px;">No Annual Calendar found for your center.</li>');
		}
	}
	
	function getMyTasks(){
		$("#mytask_ul").empty();
		var ajaxUrl = '/ajax/task_list?flag=true&selectedTab=myTask&filterParam=Open';
		$.ajax({
			url : ajaxUrl,
			success : function (data){
				if (data['allTask']!=null && data['allTask']!='' && data['allTask']!='undefined'){
					for (i=0;i<data['allTask'].length;i++){
						$("#mytask_ul").append('<li style="font-size:12px; padding:0px;">'+data['allTask'][i]['subject']+',  Due Date - '+data['allTask'][i]['dueDate'].split(" ")[0]+' </li>');
					} 
				}else{
					$("#mytask_ul").append('<li style="font-size:12px; padding:0px;">No task found!</li>');
				}
			},
			error : function(){
//	 			alert("Error");
			}
		});
	}
	
	function multiple_centers_access(data){
 		if (data.length > 1){
 			$('#flt').attr({'style': 'display:inline-block;'});
 			for(i=1;i<data.length;i++){
				var time_table_id = 'time_table_id'+(i+2);
				var center_id = data[i]['id'];
				var center_name = data[i]['name'];
				var center_access_name = '<input type="hidden" value="'+center_name+'" data-center="'+center_id+'">'
				$('#carousel-inner1').append(center_access_name);
				$('#carousel-inner1').append(timeTableForWeek(center_id, center_name, time_table_id));
			}  
 		}
 		var centerID = $('#carousel-inner1 .active').attr("data-center_id");
 		ay_list = [];
 		$('#my_offerings > option').each(function() {
 	       	var ay_id = $(this).attr('data-academicYear'); 
 	       	if (!ay_list.includes(ay_id) ){
 	       	ay_list.push(ay_id);
 	       	}
 	           if ($(this).attr('data-centerId')==centerID){
 	           	$("ul."+ay_id).show();
 	           }else{
 	           	$("ul."+ay_id).hide();
 	           }
 	           if (ay_list.length <=1 ){
 	           	$("ul."+ay_id).show();
 	    }
        });
	}
	
  	var loading = function() {
        // add the overlay with loading image to the page
        var over = '<div id="overlay">' +
            '<td><img alt="ajax loader spinner" id="loading" src="/static/img_new/AjaxLoader.gif" style="margin-left: 352px;" ></td>' +
            '</div>';
        $(over).appendTo("#loader_div");

	};
	
	function time_conversion(time){
		time_slot = time.split('-')[0]
		hours_min = time_slot.split(' ')[0];
		hours = hours_min.split(':')[0];
		minutes = hours_min.split(':')[1];
		var ampm = hours >= 12 ? 'PM' : 'AM'; hours = hours % 12;
		hours = hours ? hours : 12; // the hour '0' should be '12'
		var time_slot_convert = hours + ':' + minutes + ' ' + ampm;
		return time_slot_convert		
	}
	
	function timeTableForWeek(center_id, center_name, time_table_id){
		var ajaxUrl = '/v2/ajax/time_table?center_id='+center_id; 
			$.ajax({
				url:ajaxUrl,
			   	success : function(resp){
					var data = resp.time_slot_list;
					var daysForEmpty = resp.days;
			   		if(data != null && data !='' && data !='undefined'){
			   			time_table_data = '<table  style="" border="1" id="'+time_table_id+'" data-center="'+center_id+'"';
			   			if(time_table_id == 'time_table_id1'){
			   				time_table_data += 'class = "table item active table_data"';
			   			}else{
			   				time_table_data += 'class = "table item table_data"';
			   			}
			   			time_table_data += 'data-center_name = "'+ center_name + '" data-center_id="'+center_id+'"' ;
						time_table_data += 'style="margin-bottom: 0px; border-color: rgb(142, 188, 50);">';
						time_table_data +='<tr>';
						time_table_data +='<th class="table_styling" style="width:11%"><b>Time Slot</b></th>';
						var days = data[0]['days'];
						for(k=0;k<days.length;k++){
							var day=Object.keys(days[k]);
							time_table_data +='<th class="table_styling" style="width:6%"><b>'+day+'</b></th>'; 
						}  
						time_table_data +='</tr>';
			   			for(i=0;i<data.length;i++){
			   				var time_start = data[i]['slot'].split('-')[0];
			   				var start_time = time_conversion(time_start);
			   				var time_end = data[i]['slot'].split('-')[1];
			   				var end_time = time_conversion(time_end);
							data[i]['slot'] = start_time+'-'+end_time;
			   				time_table_data +='<tr>';
				   			time_table_data +='<th class="default_time_table" >'+data[i]['slot']+'</th>';
				   			var days_val = data[i]['days'];
				   			for (k=0;k<days_val.length;k++){
				   				var day=Object.keys(days_val[k]);
				   				new_list = days_val[k][day].toString().split(",");
					   			new_list = _.uniq(new_list);
					   			new_data = '';
					   			for (j=0;j<new_list.length;j++){
					   				new_data += new_list[j];
					   				if ((new_list.length-1)!=j){
					   					new_data += ',\n';
					   				}
					   			}
				   				if (new_data ==',\n' || new_data=='' || new_data==','){
				   					new_data = '_';
			   						time_table_data +='<td class="default_time_table" style="text-align: center;">'+new_data+'</td>';
			   					}else{
				   					time_table_data +='<td class="table_styling">'+new_data+'</td>';
			   					}
				   			}
			   				time_table_data +='</tr>';
			   			}
			   		}else{
			   			time_table_data = '<table border="1" id="'+time_table_id+'"data-center="'+center_id+'"';
			   			if(time_table_id == 'time_table_id1'){
			   				time_table_data += 'class = "table item active table_data2"';
			   			}else{
			   				time_table_data += 'class = "table item table_data2"';
			   			}
			   			if($('input[data-center="'+center_id+'"]').val() != null & $('input[data-center="'+center_id+'"]').val() != '' & $('input[data-center="'+center_id+'"]').val() != 'undefined'){
			   				time_table_data += 'data-center_name = "'+$('input[data-center="'+center_id+'"]').val()+'"';
			   			}
						time_table_data += 'style="margin-bottom: 0px; border-color: rgb(142, 188, 50);"><tbody>';
						time_table_data +='<tr>';
						time_table_data +='<th class="table_styling"  style="width:5%"><b>Time Slot</b></th>';
						for(k=0;k<daysForEmpty.length;k++){
							var day = daysForEmpty[k];
							time_table_data +='<th class="table_styling"><b>'+day+'</b></th>';
						} 
						time_table_data +='</tr>';
						time_table_data +='<tr>';
	   					time_table_data +='<th class="default_time_table" style="width: 7%;">9:00AM - 10:00AM</th>';
	   					time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
	   					time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
	   					time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
	   					time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
	   					time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
	   					time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
	   					time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='</tr>';
		   				time_table_data +='<tr>';
	   					time_table_data +='<th class="default_time_table" style="width: 7%;">10:00AM - 11:00AM</th>';
	   					time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
	   					time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='</tr>';
		   				time_table_data +='<tr>';
		   				time_table_data +='<th class="default_time_table" style="width: 7%;">11:00AM - 12:00PM</th>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='</tr>';
		   				time_table_data +='<tr>';
		   				time_table_data +='<th class="default_time_table" style="width: 7%;">12:00PM - 1:00PM</th>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='</tr>';
		   				time_table_data +='<tr>';
		   				time_table_data +='<th class="default_time_table" style="width: 7%;">1:00PM - 2:00PM</th>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='</tr>';
		   				time_table_data +='<tr>';
		   				time_table_data +='<th class="default_time_table" style="width: 7%;">2:00PM - 3:00PM</th>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='</tr>';
		   				time_table_data +='<tr>';
		   				time_table_data +='<th class="default_time_table" style="width: 7%;">3:00PM - 4:00PM</th>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='</tr>';
		   				time_table_data +='<tr>';
		   				time_table_data +='<th class="default_time_table" style="width: 7%;">4:00PM - 5:00PM</th>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='<td class="default_time_table" style="text-align: center;">-</td>';
		   				time_table_data +='</tr>';
		   				time_table_data +='</tbody>';
	   				}
				   	time_table_data += '</table>';
				   	$('#time_table_div').attr('style','padding-bottom: 0px;border-collapse:separate;');
			   		$('#carousel-inner1').attr('style','max-height:500px;');
			   		$("#carousel-inner1").append(time_table_data);
			   		$("#theading_timeTable_id").attr('style','display:in-block');;
 	   				$('#overlay').remove();
				}
			});
		}
  </script>
  <script>
  	$('#flt .left').hide();
  	$('#myCarousel1').bind('slid.bs.carousel', function (){
     	var center_name = $('#carousel-inner1 .active').attr("data-center_name");
        var offering_id = $("#my_offerings").val();
        var centerID = $('#carousel-inner1 .active').attr("data-center_id");
        $.get('/v2/update-centerInfo',{'center_name':center_name,'centerID':centerID},function(resp){
        	$('#infoCenter').text(resp.center_name);
        	$('#infoSkypeId').text(resp.skype_id);
        	$('#infoCAName').text(resp.CA_name);
        	$('#infoCAPhone').text(resp.CA_phoneno);
        	$('#infoHM').text(resp.hm);
        	$('#infoFC').html(resp.fc+'&nbsp;&nbsp;'+resp.fc_phoneno);
        	$('#infoDC').html(resp.dc+'&nbsp;&nbsp;'+resp.dc_phoneno);
        	$('#infoCAD').html(resp.c_admin+'&nbsp;&nbsp;'+resp.c_admin_phoneno);
        });
        $('#my_offerings > option').each(function() {
        	var ay_id = $(this).attr('data-academicYear'); 
            if ($(this).attr('data-centerId')==centerID){
            	$('.myclasscls').attr("href", '/myclass/?ay_id='+ay_id);
            	$("ul."+ay_id).show();
            	$('.plan_topic').attr("href", '/v2/plan_topics/'+centerID+'/'+$(this).val());
            }else{
            	$("ul."+ay_id).hide();
            }
        });
  	  	
    	$('#center_name_id').text(center_name);
    	window.center_id = $('#carousel-inner1 .active').attr("data-center");

	    if ($('#carousel-inner1 .item:first').hasClass('active')){
	    	$('#flt .left').hide();
	        $('#flt .right').show();
	    } else  if ($('#carousel-inner1 .item:last').hasClass('active')){
	        $('#flt .right').hide();
	        $('#flt .left').show();
	    }else  if ($('#carousel-inner1 .item:first').hasClass('active') && $('#carousel-inner1 .item:last').hasClass('active')){
	    	$('#flt .right').hide();
	        $('#flt .left').hide();	
	    }else{
	        $('#flt .right').show();
	        $('#flt .left').show();
	    }
	});
  	$('#my_offerings').on( 'click', function () {
  		var offering_id = $("#my_offerings").val();
  		var ay = $("#my_offerings").find(':selected').attr('data-academicYear');
        $('.myclasscls').attr("href", '/myclass/?ay_id='+ay);
  	  	var centerID = $('#carousel-inner1 .active').attr("data-center_id");
  	  	$('.plan_topic').attr("href", '/v2/plan_topics/'+centerID+'/'+offering_id);
  	  	$('#changeOfferingInMenu').attr("href", '/v2/plan_topics/'+centerID+'/'+offering_id);
  	});

	document.addEventListener('DOMContentLoaded', function(event) {
	//opens the class on doc load
	var url_string = window.location.href;
	var url = new URL(url_string);
	var c = url.searchParams.get("mark_attendence");
	if (c == 'true') {
		document.getElementById("enter_class").click();
	}
	})
	

	
  	
  </script>
    
{% endblock %}
